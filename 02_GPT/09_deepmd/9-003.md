# deepmd-kit官方入门案例

# 1. 数据准备

1. 数据下载

官方下载链接：https://dp-public.oss-cn-beijing.aliyuncs.com/community/CH4.tar。浏览器中可直接下载，windows直接解压缩


2. 数据目录

```
├── CH4
    ├── 00.data
        └── OUTCAR
    ├── 01.train
        └── input.json
    └── 02.lmp
        ├── conf.lmp
        └── in.lammps
```

OUTCAR：vasp详细的计算日志，记录所有计算过程中的关键信息（如能量、力、应力、原子位置、电子自洽迭代等）。是分析计算结果的主要文件。


3. 提取训练数据和测试数据

```py
import dpdata  # 导入dpdata模块，用于处理材料计算数据
import numpy as np  # 导入NumPy库，用于数值计算

# 读取VASP输出文件'OUTCAR'，并以'vasp/outcar'格式解析，生成一个包含多个帧的系统数据
data = dpdata.LabeledSystem('OUTCAR', fmt='vasp/outcar')  

# 打印数据中包含的帧数
print('# the data contains %d frames' % len(data))  

# 从前200帧中随机选择40帧作为验证集，确保不重复选择
index_validation = np.random.choice(200, size=40, replace=False)

# 将剩余帧（即不在验证集中的帧）作为训练集的索引
index_training = list(set(range(200)) - set(index_validation))

# 从原始数据中提取训练集子系统，包含index_training指定的帧
data_training = data.sub_system(index_training)

# 从原始数据中提取验证集子系统，包含index_validation指定的帧
data_validation = data.sub_system(index_validation)

# 将训练数据保存为DeepMD格式的NumPy数组，目录为'training_data'
data_training.to_deepmd_npy('training_data')

# 将验证数据保存为DeepMD格式的NumPy数组，目录为'validation_data'
data_validation.to_deepmd_npy('validation_data')

# 打印训练数据中包含的帧数
print('# the training data contains %d frames' % len(data_training)) 

# 打印验证数据中包含的帧数
print('# the validation data contains %d frames' % len(data_validation))
```

从VASP输出文件中读取材料计算数据，并将前200帧随机分成40帧的验证集和160帧的训练集，随后将这两个数据集分别保存为DeepMD格式，并打印出各自包含的帧数。


# 2. 训练输入脚本


# 3. 模型训练



# 4. 冻结/压缩模型


# 5. 模型测试


# 6. lammps运行





# 参考资料

- [上机教程](https://tutorials.deepmodeling.com/zh-cn/latest/Tutorials/DeePMD-kit/learnDoc/Handson-Tutorial%28v2.0.3%29.html)
